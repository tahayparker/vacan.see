%% https://gitdiagram.com/

flowchart TB
    subgraph Client
        FE[Frontend Layer]
        HP["Header"]:::component
        FT["Footer"]:::component
        RL["Room List"]:::component
        MV["Main View"]:::component
        RD["Room Details"]:::component
        AC["Availability Check"]:::component
        
        FE --> HP
        FE --> FT
        FE --> RL
        FE --> MV
        FE --> RD
        FE --> AC
    end

    subgraph Server
        API[API Layer]
        RA["Room API"]:::api
        RLA["Rooms List API"]:::api
        SA["Schedule API"]:::api
        ACA["Availability Check API"]:::api
        
        API --> RA
        API --> RLA
        API --> SA
        API --> ACA
    end

    subgraph Database
        PL[Prisma Layer]
        PS["Prisma Schema"]:::db
        DM["Database Migrations"]:::db
        DU["Database Utilities"]:::db
        DI["Database Init"]:::db
        
        PL --> PS
        PL --> DM
        PL --> DU
        PL --> DI
        
        DB[(PostgreSQL/Neon)]
    end

    subgraph Automation
        GHA[GitHub Actions]
        TS["Timetable Scraper"]:::automation
        SG["Schedule Generator"]:::automation
        
        GHA --> TS
        GHA --> SG
    end

    subgraph Storage
        SD["Schedule Data"]:::storage
        CD["Classes Data"]:::storage
    end

    subgraph Config
        GS["Global Styles"]:::config
        TC["Tailwind Config"]:::config
        NC["Next.js Config"]:::config
    end

    Client --> Server
    Server --> PL
    PL --> DB
    Automation --> DB
    Storage --> Server

    %% Component Mappings
    click HP "https://github.com/tahayparker/vacan.see/blob/main/src/components/Header.js"
    click FT "https://github.com/tahayparker/vacan.see/blob/main/src/components/Footer.js"
    click RL "https://github.com/tahayparker/vacan.see/blob/main/src/components/RoomList.tsx"
    click MV "https://github.com/tahayparker/vacan.see/blob/main/src/pages/index.js"
    click RD "https://github.com/tahayparker/vacan.see/blob/main/src/pages/RoomDetails.js"
    click AC "https://github.com/tahayparker/vacan.see/blob/main/src/pages/CheckAvailability.js"
    click RA "https://github.com/tahayparker/vacan.see/blob/main/src/pages/api/room.js"
    click RLA "https://github.com/tahayparker/vacan.see/blob/main/src/pages/api/rooms.js"
    click SA "https://github.com/tahayparker/vacan.see/blob/main/src/pages/api/schedule.js"
    click ACA "https://github.com/tahayparker/vacan.see/blob/main/src/pages/api/check-availability.js"
    click PS "https://github.com/tahayparker/vacan.see/blob/main/prisma/schema.prisma"
    click DM "https://github.com/tahayparker/vacan.see/tree/main/prisma/migrations/"
    click DU "https://github.com/tahayparker/vacan.see/blob/main/src/lib/db.ts"
    click DI "https://github.com/tahayparker/vacan.see/blob/main/src/utils/init-db.ts"
    click GHA "https://github.com/tahayparker/vacan.see/blob/main/.github/workflows/update-timetable.yml"
    click TS "https://github.com/tahayparker/vacan.see/blob/main/scripts/scrape_timetable.py"
    click SG "https://github.com/tahayparker/vacan.see/blob/main/scripts/generate_schedule.py"
    click SD "https://github.com/tahayparker/vacan.see/blob/main/public/scheduleData.json"
    click CD "https://github.com/tahayparker/vacan.see/blob/main/public/classes.csv"
    click GS "https://github.com/tahayparker/vacan.see/blob/main/src/styles/globals.css"
    click TC "https://github.com/tahayparker/vacan.see/blob/main/tailwind.config.ts"
    click NC "https://github.com/tahayparker/vacan.see/blob/main/next.config.mjs"

    %% Styling
    classDef component fill:#3b82f6,color:white
    classDef api fill:#22c55e,color:white
    classDef db fill:#eab308,color:black
    classDef automation fill:#ef4444,color:white
    classDef storage fill:#8b5cf6,color:white
    classDef config fill:#f97316,color:white

    %% Legend
    subgraph Legend
        L1[Frontend Component]:::component
        L2[API Component]:::api
        L3[Database Component]:::db
        L4[Automation Component]:::automation
        L5[Storage Component]:::storage
        L6[Configuration Component]:::config
    end

    
